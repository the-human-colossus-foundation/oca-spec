<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>OCAFile Technical Specification | Overlays Capture Architecture</title><meta name="description" content="OCAFile specification">
    <link rel="preload" href="/assets/style-CrI-1ruH.css" as="style"><link rel="stylesheet" href="/assets/style-CrI-1ruH.css">
    <link rel="modulepreload" href="/assets/app-CDwp_fGw.js"><link rel="modulepreload" href="/assets/ocafile.html-DFOPNjig.js">
    <link rel="prefetch" href="/assets/index.html-DtafNhth.js" as="script"><link rel="prefetch" href="/assets/community.html-BfZtqC2q.js" as="script"><link rel="prefetch" href="/assets/contribute.html-D3NwLW08.js" as="script"><link rel="prefetch" href="/assets/oca-bin.html-gCj2SUhs.js" as="script"><link rel="prefetch" href="/assets/oca-browser.html-CQGoI88H.js" as="script"><link rel="prefetch" href="/assets/oca-bundle.html-BElNmdNS.js" as="script"><link rel="prefetch" href="/assets/oca-data-vault.html-BOWuagW1.js" as="script"><link rel="prefetch" href="/assets/oca-file.html-Ci0Igy99.js" as="script"><link rel="prefetch" href="/assets/oca-parser.html-Cxegg5cI.js" as="script"><link rel="prefetch" href="/assets/oca-presenter.html-DwA3eLby.js" as="script"><link rel="prefetch" href="/assets/oca-repository.html-C9oVOvrx.js" as="script"><link rel="prefetch" href="/assets/oca-validator.html-BeBZCF3-.js" as="script"><link rel="prefetch" href="/assets/ocafile.html-B7Y6mm0x.js" as="script"><link rel="prefetch" href="/assets/overlay-registry.html-Dj5_kdws.js" as="script"><link rel="prefetch" href="/assets/overlayfile.html-KZudOZGa.js" as="script"><link rel="prefetch" href="/assets/faq.html-Bziib1Aa.js" as="script"><link rel="prefetch" href="/assets/introduction.html-6Tyd8dbP.js" as="script"><link rel="prefetch" href="/assets/oca-vs-others-comparison.html-B41fJdcQ.js" as="script"><link rel="prefetch" href="/assets/references.html-GTR94Eo9.js" as="script"><link rel="prefetch" href="/assets/index.html-DfOv7rxh.js" as="script"><link rel="prefetch" href="/assets/overlayfile.html-C8cOULWN.js" as="script"><link rel="prefetch" href="/assets/v1.0.1.html-CC7zVpFU.js" as="script"><link rel="prefetch" href="/assets/index.html-CY1YoLCt.js" as="script"><link rel="prefetch" href="/assets/swiss-passport-example.html-DyFe6MT3.js" as="script"><link rel="prefetch" href="/assets/getting-started.html-DHC7KzuD.js" as="script"><link rel="prefetch" href="/assets/404.html-0uY4_EBu.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Overlays Capture Architecture</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Decentralized Semantics</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/guide/introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/guide/applications/" aria-label="Applications"><!--[--><!--[--><!--]--><!--]-->Applications<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/guide/faq.html" aria-label="FAQ"><!--[--><!--[--><!--]--><!--]-->FAQ<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Practical usage</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/guide/usage/getting-started.html" aria-label="Getting Started"><!--[--><!--[--><!--]--><!--]-->Getting Started<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Specification"><span class="title">Specification</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Specification"><span class="title">Specification</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/specification/" aria-label="OCA"><!--[--><!--[--><!--]--><!--]-->OCA<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/specification/ocafile.html" aria-label="OCAFile"><!--[--><!--[--><!--]--><!--]-->OCAFile<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/specification/overlayfile.html" aria-label="Overlayfile"><!--[--><!--[--><!--]--><!--]-->Overlayfile<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/the-human-colossus-foundation/oca-spec" aria-label="Contribute" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Contribute<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Ecosystem"><span class="title">Ecosystem</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Ecosystem"><span class="title">Ecosystem</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ecosystem/oca-bin.html" aria-label="OCA Bin"><!--[--><!--[--><!--]--><!--]-->OCA Bin<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ecosystem/overlayfile.html" aria-label="Overlayfile"><!--[--><!--[--><!--]--><!--]-->Overlayfile<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ecosystem/ocafile.html" aria-label="OCA File"><!--[--><!--[--><!--]--><!--]-->OCA File<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ecosystem/oca-bundle.html" aria-label="OCA Bundle"><!--[--><!--[--><!--]--><!--]-->OCA Bundle<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ecosystem/oca-repository.html" aria-label="OCA Repository"><!--[--><!--[--><!--]--><!--]-->OCA Repository<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ecosystem/overlay-registry.html" aria-label="Overlays Registry"><!--[--><!--[--><!--]--><!--]-->Overlays Registry<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/community.html" aria-label="Community"><!--[--><!--[--><!--]--><!--]-->Community<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Decentralized Semantics</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/guide/introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/guide/applications/" aria-label="Applications"><!--[--><!--[--><!--]--><!--]-->Applications<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/guide/faq.html" aria-label="FAQ"><!--[--><!--[--><!--]--><!--]-->FAQ<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Practical usage</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/guide/usage/getting-started.html" aria-label="Getting Started"><!--[--><!--[--><!--]--><!--]-->Getting Started<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Specification"><span class="title">Specification</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Specification"><span class="title">Specification</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/specification/" aria-label="OCA"><!--[--><!--[--><!--]--><!--]-->OCA<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/specification/ocafile.html" aria-label="OCAFile"><!--[--><!--[--><!--]--><!--]-->OCAFile<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/specification/overlayfile.html" aria-label="Overlayfile"><!--[--><!--[--><!--]--><!--]-->Overlayfile<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/the-human-colossus-foundation/oca-spec" aria-label="Contribute" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Contribute<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Ecosystem"><span class="title">Ecosystem</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Ecosystem"><span class="title">Ecosystem</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ecosystem/oca-bin.html" aria-label="OCA Bin"><!--[--><!--[--><!--]--><!--]-->OCA Bin<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ecosystem/overlayfile.html" aria-label="Overlayfile"><!--[--><!--[--><!--]--><!--]-->Overlayfile<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ecosystem/ocafile.html" aria-label="OCA File"><!--[--><!--[--><!--]--><!--]-->OCA File<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ecosystem/oca-bundle.html" aria-label="OCA Bundle"><!--[--><!--[--><!--]--><!--]-->OCA Bundle<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ecosystem/oca-repository.html" aria-label="OCA Repository"><!--[--><!--[--><!--]--><!--]-->OCA Repository<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ecosystem/overlay-registry.html" aria-label="Overlays Registry"><!--[--><!--[--><!--]--><!--]-->Overlays Registry<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/community.html" aria-label="Community"><!--[--><!--[--><!--]--><!--]-->Community<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">OCAFile Technical Specification <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1>OCAFile Technical Specification</h1><dl><dt> Version: </dt><dd> v2.0.0 </dd><dt> Latest published version: </dt><dd><p><a href="/specification/ocafile">https://oca.colossi.network/specification/ocafile</a></p></dd><dt> Previous published version: </dt><dd><p><a href="/specification/ocafile-v1.0.0">https://oca.colossi.network/specification/ocafile-v1.0.0</a></p></dd></dl><dl><dt> Authors: </dt><dd><p>Robert Mitwicki (<a href="https://humancolossus.foundation/" target="_blank" rel="noopener noreferrer"> Human Colossus Foundation </a>)<br> Michal Pietrus (<a href="https://argonauths.eu/" target="_blank" rel="noopener noreferrer"> ArgonAUTHs </a>)</p></dd><dt> Copyrights: </dt><dd> Human Colossus Foundation, EUPL v1.2 licence. </dd><dt> Contact: </dt><dd><p><a href="mailto:contact@humancolossus.org" target="_blank" rel="noopener noreferrer"> contact@humancolossus.org </a></p></dd></dl><h2 id="conventions-and-definitions" tabindex="-1"><a class="header-anchor" href="#conventions-and-definitions"><span>Conventions and Definitions</span></a></h2><p>Sections marked as non-normative, along with all authoring guidelines, diagrams, examples, and notes in this specification, are for informational only and are not mandatory for compliance. All other sections of this specification are normative and define the required rules and standards that must be followed to ensure conformity with the <code>OverlayFile</code> Specification.</p><p>The keywords &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;NOT RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this document are to be interpreted when, and only when, they appear in all capitals, as described in RFC 2119 [<a href="#ref-RFC2119">RFC2119</a>].</p><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"><span>Introduction</span></a></h2><p><em>This section is informative</em></p><p>This document introduces <code>OCAfile</code>, a long-term maintenance and authoring concept for <code>OCA Bundles</code>. <code>OCAfile</code> defines a textual representation of OCA Bundles based on a purpose-built Domain-Specific Language (DSL).</p><p>The <code>OCAfile</code> DSL is designed to support the creation, modification, and maintenance of <code>OCA Bundles</code> in a deterministic, human-readable, and tool-friendly manner. <code>OCAfiles</code> MAY be authored directly by individuals using general-purpose text editors, or generated and managed by specialized tooling, including graphical editors, which serialize their internal state into the <code>OCAfile</code> syntax.</p><p>By providing a canonical, text-based representation, <code>OCAfile</code> aims to improve long-term maintainability, version control integration, reproducibility, and interoperability of <code>OCA Bundles</code> across tools and ecosystems.</p><h2 id="purpose" tabindex="-1"><a class="header-anchor" href="#purpose"><span>Purpose</span></a></h2><p><em>This section is informative</em></p><p>The purpose of this specification is to define the <code>OCAfile</code> syntax for the creation and maintenance of <code>OCA Bundles</code>.</p><p>The <code>OCAfile</code> syntax consists of text-based operations that are designed to be both human-readable and machine-readable. The syntax prioritizes clarity, composability, and determinism, enabling authors to express <code>OCA Bundle</code> structure and semantics in a concise and unambiguous form.</p><p>By standardizing this syntax, the specification aims to facilitate consistent <code>OCA Bundle</code> authoring across manual workflows and automated tooling, while supporting long-term maintenance, review, and version control practices.</p><h2 id="main-characteristics" tabindex="-1"><a class="header-anchor" href="#main-characteristics"><span>Main characteristics</span></a></h2><p><em>This section is informative</em></p><h3 id="determinism-through-layered-architecture" tabindex="-1"><a class="header-anchor" href="#determinism-through-layered-architecture"><span>Determinism Through Layered Architecture</span></a></h3><p><code>OCAfile</code> employs a deterministic, layered architecture based on an append-only provenance log. Each operation applied to an <code>OCA Bundle</code> is recorded as a new log entry, forming an immutable history of bundle evolution.</p><p>Each log entry is defined as:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">digest(previous entry) | current entry</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The cryptographic digest of this concatenation uniquely identifies the resulting layer. As a consequence, each layer is deterministically derived from all preceding layers.</p><p>Layer digests serve as vertices in a directed acyclic graph (DAG), enabling unambiguous resolution and reuse of previously defined layers. This structure allows newly constructed <code>OCA Bundles</code> to reference or implicitly benefit from existing bundles when shared components—such as attribute definitions—are identical. Determinism is therefore preserved across independent authoring workflows.</p><h3 id="text-based-format" tabindex="-1"><a class="header-anchor" href="#text-based-format"><span>Text-Based Format</span></a></h3><p><code>OCAfile</code> uses a text-based representation to ensure readability, inspectability, and ease of authoring. The textual format supports both manual editing and automated generation without loss of semantic fidelity.</p><h3 id="domain-specific-language-dsl" tabindex="-1"><a class="header-anchor" href="#domain-specific-language-dsl"><span>Domain-Specific Language (DSL)</span></a></h3><p><code>OCAfile</code> defines a dedicated domain-specific language (DSL) that is both human-readable and machine-readable. The DSL provides explicit constructs for creating and modifying <code>OCA Bundles</code> while preserving deterministic layering semantics.</p><p>The DSL is designed to support the full lifecycle of an <code>OCA Bundle</code>, enabling incremental construction, modification, and long-term maintenance through ordered operations.</p><h3 id="version-control-system-compatibility" tabindex="-1"><a class="header-anchor" href="#version-control-system-compatibility"><span>Version Control System Compatibility</span></a></h3><p>As a text-based format, <code>OCAfile</code> is inherently compatible with version control systems (VCS). This enables meaningful diffing, history tracking, branching, and merging, which are not feasible with binary representations. VCS compatibility supports collaborative development and long-term stewardship of <code>OCA Bundles</code>.</p><h2 id="ocafile-dsl" tabindex="-1"><a class="header-anchor" href="#ocafile-dsl"><span>OCAfile DSL</span></a></h2><h3 id="grammar" tabindex="-1"><a class="header-anchor" href="#grammar"><span>Grammar</span></a></h3><p><em>This section is informative</em></p><p>This specification defines a formal grammar for <code>OCAfile</code>. The complete and authoritative grammar definition is provided separately and SHALL be used as the reference for parsing and validation. It can be found <a href="https://raw.githubusercontent.com/THCLab/oca-rs/refs/heads/v2/oca-file/src/ocafile.pest" target="_blank" rel="noopener noreferrer">here</a></p><h3 id="meta-directives" tabindex="-1"><a class="header-anchor" href="#meta-directives"><span>Meta Directives</span></a></h3><p>An <code>OCAfile</code> SHOULD declare meta directives at the beginning of the file. Meta directives define descriptive metadata associated with the <code>OCAfile</code> itself.</p><p>Each meta directive:</p><ul><li>MUST appear before any non-directive content</li><li>MUST terminate with a newline character</li><li>MUST consist of a key-value pair in the following form:</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">-- directive=value</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Both directive and value MUST match the regular expression:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">[a-zA-Z0-9\-]+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="supported-meta-directives" tabindex="-1"><a class="header-anchor" href="#supported-meta-directives"><span>Supported Meta Directives</span></a></h3><p>The following meta directives are defined by this specification:</p><ul><li><code>name</code>: Defines a human-meaningful name for the OCAfile. This name MAY be used as a named reference in conjunction with the refn prefix when defining references (see References).</li><li><code>version</code>: Defines the version identifier of the OCAfile.</li></ul><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-0" aria-selected="true">OCAFILE</button></div><!--[--><div class="vp-code-tab active" id="v-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">OCAFILE</div><!--[--><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">--name=passport-example</span>
<span class="line">--version=2.0</span>
<span class="line">ADD ATTRIBUTE dateOfBirth=DateTime documentNumber=Text $</span>
<span class="line">               documentType=[ Text ] fullName=Text $</span>
<span class="line">               height=Numeric issuingState=Text photoImage=Binary $</span>
<span class="line">               sex=Text ocrTextLines=[[ Text ]]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p><em>Example 1. Code snippet presenting usage of meta directives name and version</em></p><h3 id="commands" tabindex="-1"><a class="header-anchor" href="#commands"><span>Commands</span></a></h3><p>All <code>OCAfile</code> commands are case-insensitive.</p><p>A command represents an operation applied to an <code>OCA Bundle</code>. Commands are used to:</p><ul><li>Define the base OCA Bundle from which a new bundle is derived</li><li>Add new objects</li><li>Modify existing objects</li><li>Remove existing objects</li></ul><p>Commands are processed sequentially and contribute to the provenance log of the <code>OCA Bundle</code>.</p><h4 id="from-operation" tabindex="-1"><a class="header-anchor" href="#from-operation"><span><code>FROM</code> Operation</span></a></h4><p>The <code>FROM</code> operation is used to bootstrap an <code>OCAfile</code> from an existing <code>OCA Bundle</code>. It establishes the base bundle upon which all subsequent commands operate.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">FROM &lt;SAID&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-1" aria-selected="true">OCAFILE (BMI)</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-2" aria-selected="false">OCAFILE (Patient)</button></div><!--[--><div class="vp-code-tab active" id="v-1" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">OCAFILE (BMI)</div><!--[--><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">--name=patient-bmi</span>
<span class="line"># from patient.ocafile</span>
<span class="line">FROM EJnT654wrORxfcNJ1yqVhqd0uRHihOSfepmB0OR1jPxf</span>
<span class="line">ADD ATTRIBUTE wgt=Numeric hgt=Numeric</span>
<span class="line"></span>
<span class="line"># Add meta data</span>
<span class="line">ADD Overlay Meta</span>
<span class="line">  language=&quot;en&quot;</span>
<span class="line">  name=&quot;Patient BMI&quot;</span>
<span class="line">  description=&quot;Standard 1 Patient BMI&quot;</span>
<span class="line"></span>
<span class="line"># Add character encoding</span>
<span class="line">ADD Overlay CHARACTER_ENCODING</span>
<span class="line">  attribute_character_encodings</span>
<span class="line">    wgt=&quot;utf-8&quot;</span>
<span class="line">    hgt=&quot;utf-8&quot;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">OCAFILE (Patient)</div><!--[--><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">--name=patient</span>
<span class="line">ADD ATTRIBUTE first_name=Text last_name=Text</span>
<span class="line"></span>
<span class="line"># Add meta data</span>
<span class="line">ADD Overlay Meta</span>
<span class="line">  language=&quot;en&quot;</span>
<span class="line">  name=&quot;Patient Record&quot;</span>
<span class="line">  description=&quot;Standard 1 Patient record&quot;</span>
<span class="line"></span>
<span class="line"># Add character encoding</span>
<span class="line">ADD Overlay CHARACTER_ENCODING</span>
<span class="line">  attribute_character_encodings</span>
<span class="line">    first_name=&quot;utf-8&quot;</span>
<span class="line">    last_name=&quot;utf-8&quot;</span>
<span class="line"></span>
<span class="line">ADD OVERLAY LABEL</span>
<span class="line">  language=&quot;en&quot;</span>
<span class="line">  attribute_labels</span>
<span class="line">    first_name=&quot;First Name&quot;</span>
<span class="line">    last_name=&quot;Last Name&quot;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p><em>Example 2: OCAFILE presenting usage of FROM command</em></p><ul><li><code>&lt;SAID&gt;</code> identifies the base <code>OCA Bundle</code> using its Self-Addressing Identifier.</li></ul><p>If present, the FROM command MUST be the first command in the OCAfile.</p><p>An <code>OCAfile</code> MAY omit the FROM command, in which case a new OCA Bundle is created from an empty base.</p><h4 id="add-operation" tabindex="-1"><a class="header-anchor" href="#add-operation"><span><code>ADD</code> Operation</span></a></h4><p>The <code>ADD</code> operation introduces new elements into the <code>OCA Bundle</code>.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">ADD &lt;ATTRIBUTE | OVERLAY&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Where:</p><p>-<code>ATTRIBUTE</code> adds one or more attributes to the capture base (see Attribute Object).</p><ul><li><code>OVERLAY</code> adds a new overlay to the <code>OCA Bundle</code> (see Overlay).</li></ul><h4 id="alter-operation" tabindex="-1"><a class="header-anchor" href="#alter-operation"><span><code>ALTER</code> Operation</span></a></h4><p>The <code>ALTER</code> operation modifies existing elements while preserving provenance.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">ALTER &lt;ATTRIBUTE | OVERLAY&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The targeted element <code>MUST</code> already exist in the <code>OCA Bundle</code>.</p><p>If the referenced element does not exist, the processor <code>MUST</code> raise an error.</p><p>Each <code>ALTER</code> operation results in a new layer in the provenance log.</p><h4 id="remove-operation" tabindex="-1"><a class="header-anchor" href="#remove-operation"><span><code>REMOVE</code> Operation</span></a></h4><p>The <code>REMOVE</code> operation deletes an existing element from the <code>OCA Bundle</code>.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">REMOVE &lt;ATTRIBUTE | OVERLAY&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The targeted element <code>MUST</code> already exist in the <code>OCA Bundle</code>.</p><p>If the referenced element does not exist, the processor <code>MUST</code> raise an error.</p><p>Removal operations are recorded in the provenance log.</p><h3 id="attribute-object" tabindex="-1"><a class="header-anchor" href="#attribute-object"><span>Attribute Object</span></a></h3><p>An Attribute object represents an attribute in the capture base. It defines the attribute name and its associated type.</p><p>Example:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">ADD ATTRIBUTE name=Text age=Numeric</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="attribute-types" tabindex="-1"><a class="header-anchor" href="#attribute-types"><span>Attribute Types</span></a></h3><p>Attribute types MUST be selected from the types defined by the OCA specification.</p><h3 id="primitive-types" tabindex="-1"><a class="header-anchor" href="#primitive-types"><span>Primitive Types</span></a></h3><p>The following primitive attribute types are supported as per <a class="route-link" href="/specification/#attribute-type">OCA specification</a>:</p><ul><li><code>Binary</code>: Represents binary values, such as images or encoded data.</li><li><code>Boolean</code>: Represents a boolean value (true or false).</li><li><code>DateTime</code>: Represents a date, time, or combined date-time value.</li><li><code>Numeric</code>: Represents any numeric value.</li><li><code>Text</code>: Represents arbitrary textual content.</li><li><code>Reference</code>: Reference to another object</li><li><code>[&lt;data type&gt;]</code>: Arrray of supported data type</li></ul><h3 id="references" tabindex="-1"><a class="header-anchor" href="#references"><span>References</span></a></h3><p>References are used to refer to other OCA objects.</p><p>The following reference types are defined:</p><ul><li>Named reference (<code>refn</code>) A human-readable reference that <code>MUST</code> use the following form:</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">refn:&lt;name&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The referenced name MUST be defined using the name meta directive.</p><p>SAID-based reference (<code>refs</code>) A cryptographic reference that MUST use the following form:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">refs:&lt;OCA object SAID&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-3" aria-selected="true">OCAFILE</button></div><!--[--><div class="vp-code-tab active" id="v-3" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">OCAFILE</div><!--[--><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">--name=patient-record</span>
<span class="line">ADD ATTRIBUTE patient=refn:patient bmi=refs:EPFtQVmMXhqy8wj07JYPjfTc4zCyRsNRB7141nE22CaV date=DateTime author=Text</span>
<span class="line"></span>
<span class="line">ADD OVERLAY META</span>
<span class="line">  language=&quot;en&quot;</span>
<span class="line">  name=&quot;Patient record&quot;</span>
<span class="line">  description=&quot;Patient medical records with BMI calculation&quot;</span>
<span class="line"></span>
<span class="line">ADD OVERLAY LABEL</span>
<span class="line">  language=&quot;en&quot;</span>
<span class="line">  attribute_labels</span>
<span class="line">    patient=&quot;Patient&quot;</span>
<span class="line">    bmi=&quot;Body Mass Index&quot;</span>
<span class="line">    date=&quot;Date&quot;</span>
<span class="line">    author=&quot;Author&quot;</span>
<span class="line"></span>
<span class="line">ADD OVERLAY LABEL</span>
<span class="line">  language=&quot;pl&quot;</span>
<span class="line">  attribute_labels</span>
<span class="line">    patient=&quot;Pacjent&quot;</span>
<span class="line">    bmi=&quot;Wskaźnik BMI&quot;</span>
<span class="line">    date=&quot;Data&quot;</span>
<span class="line">    author=&quot;Autor&quot;</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p><em>Example 3: OCAFILE presenting usage of refs and refn as a linked object</em></p><h3 id="collection-types" tabindex="-1"><a class="header-anchor" href="#collection-types"><span>Collection Types</span></a></h3><p>Collection types allow the definition of ordered collections of elements.</p><p>The following collection type is defined:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Array[&lt;Collection type&gt; | &lt;Primitive type&gt; | &lt;Reference&gt;]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Collections MAY contain primitive types, references, or nested collection types.</p><h2 id="references-1" tabindex="-1"><a class="header-anchor" href="#references-1"><span>References</span></a></h2><h3 id="informative-references" tabindex="-1"><a class="header-anchor" href="#informative-references"><span>Informative References</span></a></h3><dt id="ref-RFC2119"> [RFC2119] </dt><dd><p>Bradner, S. Key words for use in RFCs to Indicate Requirement Levels, BCP 14, RFC 2119, DOI 10.17487/RFC2119 (March 1997) <a href="https://www.rfc-editor.org/rfc/rfc2119" target="_blank" rel="noopener noreferrer">https://www.rfc-editor.org/rfc/rfc2119</a></p></dd></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><time class="meta-item-info" datetime="2026-01-19T18:17:24.000Z" data-allow-mismatch>1/19/26, 6:17 PM</time></div><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CDwp_fGw.js" defer></script>
  </body>
</html>
